import SwiftUI



class EmojiGame: ObservableObject{
    typealias Card = MemoryGame<String>.Card
    
    @Published var model: MemoryGame<String>
    
    static func createMemoryGame (theme: Theme) -> MemoryGame<String>{
        var pairs = 6
        if pairs > theme.content.count{
            pairs = theme.content.count
        }
        return MemoryGame<String>(numberOfPairsOfCards: pairs){
            return  theme.content.shuffled()
        }
    }
    
    var score: Int{
        return model.score
    }
    var cards: Array<Card>{
        return model.cards
    }
    
    var end: Bool{
        return model.end
    }
    
    init(ID: Int?){
        if ID == nil{
            initialtheme = EmojiGame.themeslist.randomElement()!
        }else{
            initialtheme = EmojiGame.themeslist[ID!]
        }
        ThemeModel = EmojiGame.createrandomTheme(currenttheme: initialtheme)
        model = EmojiGame.createMemoryGame(theme: initialtheme)
    }
    
    typealias Theme = GameThemes.Theme
    
    @Published var ThemeModel: GameThemes
    
    static var themeslist: Array<Theme> = [Theme(themeName: "Animals", numberOfCards: 6, cardColor: "blue", content : ["ðŸŸ","ðŸ¦Š","ðŸ¦","ðŸ¦¥","ðŸ¥","ðŸµ","ðŸ™","ðŸ·","ðŸ¼","ðŸ¶","ðŸ¦§","ðŸ»","ðŸ¸","ðŸ¨","ðŸ®","ðŸ¯","ðŸ¦","ðŸ¿","ðŸ¦–","ðŸ±","ðŸ¹","ðŸ€","ðŸ¦”","ðŸ­","ðŸ”","ðŸ§","ðŸ¦","ðŸ¦†","ðŸ¦„","ðŸ´","ðŸ¡","ðŸŠ","ðŸ¦ˆ","ðŸ³","ðŸ¦","ðŸ†","ðŸ«","ðŸ¦“","ðŸ¦’","ðŸ¦˜","ðŸ","ðŸ©","ðŸƒ","ðŸ","ðŸ¦©","ðŸ¦¦","ðŸ¦¨","ðŸ‰","ðŸ˜","ðŸ¦›","ðŸ¦","ðŸª","ðŸ¦¢","ðŸ¦œ","ðŸ ","ðŸ¦‘","ðŸ¦ž","ðŸ¦","ðŸ¦•","ðŸ•·","ðŸ…","ðŸ¦Ž","ðŸ¢"]), Theme(themeName: "Vehicles", numberOfCards: 6, cardColor: "gray", content : ["ðŸš˜","ðŸš•","ðŸš™","ðŸšŒ","ðŸšŽ","ðŸŽ","ðŸš“","ðŸš‘","ðŸš’","ðŸš","ðŸšš","ðŸš›","ðŸšœ","ðŸ¦½","ðŸ¦¼","ðŸ›´","ðŸš²","ðŸ›µ","ðŸ","ðŸ›º","ðŸš”","ðŸš","ðŸš—","ðŸš–","ðŸš¡","ðŸš ","ðŸšŸ","ðŸšƒ","ðŸš‹","ðŸšž","ðŸš","ðŸš„","ðŸš…","ðŸšˆ","ðŸš‚","ðŸš†","ðŸš‡","ðŸšŠ","ðŸš‰","âœˆï¸","ðŸ›«","ðŸ›©","ðŸ›°","ðŸš€","ðŸ›¸","ðŸš","ðŸ›¶","â›µï¸","ðŸš¤","ðŸ›¥","ðŸ›³","â›´","ðŸš¢","ðŸŽ¡"]), Theme(themeName: "Flags", numberOfCards: 6, cardColor: "red", content : ["ðŸ‡¦ðŸ‡«","ðŸ‡¦ðŸ‡½","ðŸ‡¦ðŸ‡±","ðŸ‡©ðŸ‡¿","ðŸ‡¦ðŸ‡¸","ðŸ‡¦ðŸ‡©","ðŸ‡¦ðŸ‡´","ðŸ‡¦ðŸ‡®","ðŸ‡¦ðŸ‡¶","ðŸ‡¦ðŸ‡¬","ðŸ‡¦ðŸ‡·","ðŸ‡¦ðŸ‡²","ðŸ‡¦ðŸ‡¼","ðŸ‡¦ðŸ‡º","ðŸ‡¦ðŸ‡¹","ðŸ‡¦ðŸ‡¿","ðŸ‡¿ðŸ‡²","ðŸ‡§ðŸ‡­","ðŸ‡§ðŸ‡©","ðŸ‡§ðŸ‡§","ðŸ‡§ðŸ‡¾","ðŸ‡§ðŸ‡ª","ðŸ‡§ðŸ‡¿","ðŸ‡§ðŸ‡²","ðŸ‡§ðŸ‡¯","ðŸ‡§ðŸ‡¹","ðŸ‡§ðŸ‡´","ðŸ‡§ðŸ‡¦","ðŸ‡§ðŸ‡¼","ðŸ‡§ðŸ‡·","ðŸ‡®ðŸ‡´","ðŸ‡»ðŸ‡¬","ðŸ‡§ðŸ‡³","ðŸ‡§ðŸ‡¬","ðŸ‡§ðŸ‡«","ðŸ‡§ðŸ‡®","ðŸ‡°ðŸ‡­","ðŸ‡¨ðŸ‡²","ðŸ‡¨ðŸ‡¦","ðŸ‡®ðŸ‡¨","ðŸ‡¨ðŸ‡»","ðŸ‡§ðŸ‡¶","ðŸ‡°ðŸ‡¾","ðŸ‡¨ðŸ‡«","ðŸ‡¹ðŸ‡©","ðŸ‡¨ðŸ‡±","ðŸ‡¨ðŸ‡³","ðŸ‡¨ðŸ‡½","ðŸ‡¨ðŸ‡¨","ðŸ‡¨ðŸ‡´","ðŸ‡°ðŸ‡²","ðŸ‡¨ðŸ‡¬","ðŸ‡¨ðŸ‡©","ðŸ‡¨ðŸ‡°","ðŸ‡¨ðŸ‡·","ðŸ‡­ðŸ‡·","ðŸ‡¨ðŸ‡®","ðŸ‡¨ðŸ‡º","ðŸ‡¨ðŸ‡¼","ðŸ‡¨ðŸ‡¾","ðŸ‡¨ðŸ‡¿","ðŸ‡©ðŸ‡°","ðŸ‡©ðŸ‡¯","ðŸ‡©ðŸ‡²","ðŸ‡©ðŸ‡´","ðŸ‡ªðŸ‡¨","ðŸ‡ªðŸ‡¬","ðŸ‡¸ðŸ‡»","ðŸ‡¬ðŸ‡¶","ðŸ‡ªðŸ‡·","ðŸ‡ªðŸ‡ª","ðŸ‡¸ðŸ‡¿","ðŸ‡ªðŸ‡¹","ðŸ‡ªðŸ‡º","ðŸ‡«ðŸ‡°","ðŸ‡«ðŸ‡´","ðŸ‡«ðŸ‡¯","ðŸ‡«ðŸ‡®","ðŸ‡«ðŸ‡·","ðŸ‡¬ðŸ‡«","ðŸ‡µðŸ‡«","ðŸ‡¹ðŸ‡«","ðŸ‡¬ðŸ‡¦","ðŸ‡¬ðŸ‡²","ðŸ‡¬ðŸ‡ª","ðŸ‡©ðŸ‡ª","ðŸ‡¬ðŸ‡­","ðŸ‡¬ðŸ‡®","ðŸ‡¬ðŸ‡·","ðŸ‡¬ðŸ‡±","ðŸ‡¬ðŸ‡©","ðŸ‡¬ðŸ‡µ","ðŸ‡¬ðŸ‡º","ðŸ‡¬ðŸ‡¹","ðŸ‡¬ðŸ‡¬","ðŸ‡¬ðŸ‡³","ðŸ‡¬ðŸ‡¼","ðŸ‡¬ðŸ‡¾","ðŸ‡­ðŸ‡¹","ðŸ‡­ðŸ‡³","ðŸ‡­ðŸ‡°","ðŸ‡­ðŸ‡º","ðŸ‡®ðŸ‡¸","ðŸ‡®ðŸ‡³","ðŸ‡®ðŸ‡©","ðŸ‡®ðŸ‡·","ðŸ‡®ðŸ‡¶","ðŸ‡®ðŸ‡ª","ðŸ‡®ðŸ‡²","ðŸ‡®ðŸ‡±","ðŸ‡®ðŸ‡¹","ðŸ‡¯ðŸ‡²","ðŸ‡¯ðŸ‡µ","ðŸ‡¯ðŸ‡ª","ðŸ‡¯ðŸ‡´","ðŸ‡°ðŸ‡¿","ðŸ‡°ðŸ‡ª","ðŸ‡°ðŸ‡®","ðŸ‡½ðŸ‡°","ðŸ‡°ðŸ‡¼","ðŸ‡°ðŸ‡¬","ðŸ‡±ðŸ‡¦","ðŸ‡±ðŸ‡»","ðŸ‡±ðŸ‡¸","ðŸ‡±ðŸ‡¾","ðŸ‡²ðŸ‡¹","ðŸ‡²ðŸ‡­","ðŸ‡²ðŸ‡¶","ðŸ‡²ðŸ‡·","ðŸ‡²ðŸ‡º","ðŸ‡¾ðŸ‡¹","ðŸ‡²ðŸ‡¸","ðŸ‡µðŸ‡°","ðŸ‡¬ðŸ‡¸","ðŸ‡¿ðŸ‡¦","ðŸ‡¹ðŸ‡´","ðŸ‡¬ðŸ‡§","ðŸ‡¦ðŸ‡ª","ðŸ‡¿ðŸ‡¼","ðŸ‡ªðŸ‡­","ðŸ‡¾ðŸ‡ª","ðŸ‡°ðŸ‡·","ðŸ‡¸ðŸ‡´"]),Theme(themeName: "Food", numberOfCards: 6, cardColor: "orange", content : ["ðŸŽ","ðŸ¥ž","ðŸ”","ðŸŸ","ðŸ–","ðŸ¦","ðŸ¥—","ðŸŒ®","ðŸ¥ª","ðŸ§€","ðŸ—","ðŸŒ­","ðŸ¥®","ðŸ¥©","ðŸ•","ðŸŒ¯","ðŸš","ðŸ¥˜","ðŸ§‡","ðŸ§†","â˜•ï¸","ðŸ","ðŸœ","ðŸ²","ðŸ±","ðŸ¥Ÿ","ðŸ","ðŸ‹","ðŸ‰","ðŸŠ","ðŸ¥¯","ðŸ¥","ðŸ ","ðŸ¥¨","ðŸ¥«","ðŸ§","ðŸ¥§","ðŸ§","ðŸ¨","ðŸ¤","ðŸ…","ðŸŒ","ðŸ¥‘","ðŸ§ˆ","ðŸž","ðŸ¥ ","ðŸ¥","ðŸ˜","ðŸ™","ðŸ«","ðŸ¥œ","ðŸ§‰","ðŸ¥¡","ðŸ¥£","ðŸ§ƒ","ðŸµ","ðŸª","ðŸ©","ðŸ¬","ðŸ­","ðŸŒ°","ðŸ¯","ðŸ¥›","ðŸ¥‚","ðŸº","ðŸ·","ðŸ½","ðŸ¢","ðŸ£","ðŸ¥”","ðŸ¥","ðŸ¥¥","ðŸ¥­","ðŸ’","ðŸ§„","ðŸ¥š","ðŸ¶","ðŸ®","ðŸŽ‚"]), Theme(themeName: "Nature", numberOfCards: 6, cardColor: "green" , content : ["ðŸ‚","â˜€ï¸","â›…ï¸","ðŸŒ¨","ðŸŒš","ðŸŒ´","ðŸŒ²","ðŸ’","ðŸŒ»","ðŸŒº","ðŸŒ¹","ðŸŒµ","â˜˜ï¸","ðŸ¥€","ðŸŒ¼","ðŸŒ·","ðŸŽ‹","ðŸŒŠ","ðŸŒ½","ðŸ¥•","ðŸ¥¬","ðŸ‡","ðŸ","âœ¿","â","âƒ","ðŸŒ³","ðŸŽ","ðŸƒ","ðŸŒ¿","ðŸ€","ðŸ„","ðŸš","ðŸŒ¾","ðŸŽ„","â›„ï¸","ðŸŒ«","ðŸ•Š"]), Theme(themeName: "Tools", numberOfCards: 6, cardColor: "yellow", content : ["ðŸ”§","ðŸ› ","â›“","ðŸ§²","ðŸª“","ðŸ§¹","ðŸ§»","ðŸ”‘","ðŸ”ª","ðŸ›Ž","ðŸ’ˆ","ðŸ”¨","ðŸ•¹","âš™ï¸","âš”ï¸","ðŸ§°","ðŸ”Œ","ðŸ”¦","ðŸ’¡","ðŸ•°","â³","âš–ï¸","ðŸº","ðŸ”«","ðŸ§­","â˜Žï¸","ðŸ“€","ðŸ”­","ðŸ§¨","ðŸ”©","ðŸ§¯","ðŸ“Ÿ","ðŸ“ ","ðŸŽ¥","ðŸ—œ","ðŸ–²","âš’","â›","ðŸ§±","âš±ï¸","ðŸº","ðŸ“¿","ðŸ§¿","ðŸ§º","ðŸ—","ðŸª’","ðŸ›’","ðŸ“®","âœ‚ï¸","ðŸ–Š","âœï¸","ðŸ–","ðŸ”“","ðŸ”’","ðŸ“","ðŸ§®","ðŸ“","ðŸ§·","ðŸ®","ðŸ©¹","ðŸŽ›","âŒ›ï¸","ðŸŽš","â²","ðŸ—ž","ðŸ”","ðŸ–Œ","ðŸ”®"])]
    
    
    static func createrandomTheme(currenttheme: Theme) -> GameThemes{
        return GameThemes(allthemes: themeslist, currenttheme: currenttheme)
    }
    
    var initialtheme: Theme
    
    var actualtheme: Theme {
        return ThemeModel.currenttheme!
    }
    var cardColor: Color{
        switch actualtheme.cardColor{
        case "red":
            return Color.red
        case "blue":
            return Color.blue
        case "gray":
            return Color.gray
        case "yellow":
            return Color.yellow
        case "green":
            return Color.green
        case "orange":
            return Color.orange
        default:
            return Color.red
        }
    }
    

    //MARK: - Intents

    func choose(_ card: Card){
        model.choose(card)
    }
    
    func new(){
        model = EmojiGame.createMemoryGame(theme: actualtheme)
    }
    
    func shuffle() {
        return model.shuffle()
    }
}
    
